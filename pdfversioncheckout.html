<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Purpose Driven Planner | Checkout for pdf version of the planner</title>
    <link rel="stylesheet" href="./css/main.css" />
</head>

<body>
    <div class="checkoutContainer">
        <div class="checkout__header">
            <div class="checkout__header-heading">
                <h1>Purpose Driven Planner</h1>
                <p>
                    A High-Level Course For Those People Looking To Amplify Their Performance In Any Aspect Of Life
                    While Tearing Down The Barriers That Are Constantly Holding Them Back.
                </p>
            </div>
            <div class="checkout__header-logo">
                <img src="./img/pdp-logo.svg" alt="">
            </div>
        </div>
        <div class="checkout__content">
            <form name="pdfpaid" id="pdfpaid" action="POST" data-netlify="true" class="checkoutForm">
                <h2 class="checkoutForm__heading">Checkout Form</h2>
                <p class="checkoutError hidden">Please fill out all of the fields</p>
                <div class="checkoutForm__group">
                    <label for="">Name:</label>
                    <input type="text" name="name" placeholder="Enter your name here" required id="name">
                </div>
                <div class="checkoutForm__group mb-3">
                    <label for="">Email:</label>
                    <input type="email" name="email" placeholder="Enter your email here" required id="email">
                </div>
                <div id="smart-button-container">
                    <div style="text-align: center;">
                        <div id="paypal-button-container"></div>
                    </div>
                </div>
                <script src="https://www.paypal.com/sdk/js?client-id=sb&currency=USD"
                    data-sdk-integration-source="button-factory"></script>
                <script>
                    function initPayPalButton() {
                        paypal.Buttons({
                            style: {
                                shape: 'pill',
                                color: 'white',
                                layout: 'vertical',
                                label: 'buynow',
                            },

                            onInit: function (data, actions) {

                                // Disable the buttons
                                let valid1 = false;
                                let valid2 = false;
                                actions.disable();
                                document.querySelector('#name').addEventListener('input', (e) => {
                                    if (e.target.value.length) {
                                        valid1 = true;
                                    } else {
                                        valid1 = false;
                                    }
                                    if (valid1 && valid2) {
                                        document.querySelector('.checkoutError').classList.add('hidden');
                                        actions.enable();
                                    } else {
                                        document.querySelector('.checkoutError').classList.remove('hidden');
                                        actions.disable();
                                    }
                                });
                                document.querySelector('#email').addEventListener('input', (e) => {
                                    if (/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.target.value)) {
                                        valid2 = true;
                                    } else {
                                        valid2 = false;
                                    }
                                    if (valid1 && valid2) {
                                        document.querySelector('.checkoutError').classList.add('hidden');
                                        actions.enable();
                                    } else {
                                        document.querySelector('.checkoutError').classList.remove('hidden');
                                        actions.disable();
                                    }
                                });
                            },

                            createOrder: function (data, actions) {
                                return actions.order.create({
                                    purchase_units: [{ "description": "PDF version of Purpose Driven Planner", "amount": { "currency_code": "USD", "value": 19.99 } }]
                                });
                            },

                            onApprove: function (data, actions) {
                                return actions.order.capture().then(function (details) {
                                    const name = details.payer.name.given_name
                                    const mailEl = document.querySelector('#email')

                                    const message = {
                                        to: mailEl.value,
                                        subject: 'Thank You For Your Purchase',
                                        text: `
Dear purpose driven student,
Welcome to the Purpose Driven Planner customer community. We’re honored that you’ve chosen to work with us.

It’s our utmost priority to ensure you have an excellent experience with our product and team from day one. 
You’ve purchased the full Purpose Driven Planner course in PDF form, so here it is:

https://firebasestorage.googleapis.com/v0/b/pdplanner-a30ab.appspot.com/o/PDP-FULL-4-WEEK-E-BOOK1.pdf?alt=media&token=41d9192a-0ac5-49ee-82df-6075b06d754a

We wish you great success from implementing the planner in your life and hope we see more of you in the future.
In the meantime feel free to check out our website: thepurposedrivenplanner.com 
It is our best wish for you to take the full online PDP course in the future.
Here’s just a reminder of all the benefits Purpose Driven Planner provides you with:
    • Better time management
    • Sense of wholeness
    • Increased energy levels
    • Mindset shifts
    • Years of time saved

Feel free to write us an e-mail and we’ll make sure we respond with a personalized comeback within the next 24 hours.

Best regards,
PDP team`
                                    }

                                    fetch('http://104.131.172.97:3000/', {
                                        method: 'POST',
                                        headers: {
                                            'Accept': 'application/json',
                                            'Content-Type': 'application/json'
                                        },
                                        body: JSON.stringify(message)
                                    }).then(_ => {
                                        window.location = '/landing/pdfthankyou.html';
                                    }).catch(_ => {
                                        alert("Error, please contact support: purposedrivenplanner@gmail.com")
                                    })

                                });
                            },

                            onError: function (err) {
                                console.log(err);
                            }
                        }).render('#paypal-button-container');
                    }
                    initPayPalButton();
                </script>
            </form>
            <div class="checkout__content-benefits">
                <h2>Here’s Just A Fraction Of What You Get:</h2>
                <p><img src="./img/tick.svg" alt="">Better time management: Your day will last 240 hours in productivity
                    time.</p>
                <p><img src="./img/tick.svg" alt=""> Sense of wholeness: Your family, friends and passions will not get
                    left behind due to lack of your organizational skills.</p>
                <p><img src="./img/tick.svg" alt=""> Increased energy levels: So high on you won’t be able to sleep at
                    night, coming from a deep sense of purpose.</p>
                <p><img src="./img/tick.svg" alt=""> Mindset shifts: You will think like a top productive CEO in
                    combination with the person who’s fulfillment level doesn’t drop below level 10.</p>
                <p><img src="./img/tick.svg" alt=""> Years of time saved: Over 30 of the most efficient
                    self-development, practical psychology books, seminars and more than 7 years of trial and error
                    packed into 2 hours of video material where every second counts.</p>
            </div>
        </div>
        <footer class="checkout__footer">
            <p>“A vision without a task is but a dream, a task without a vision is drudgery, a vision and a task are the
                hope of the World.” From a church in Sussex, England, ca. 1730.</p>
        </footer>
    </div>
</body>

</html>