<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RWCBFS0WEB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-RWCBFS0WEB');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Purpose Driven Planner | Checkout for pdf version of the planner</title>
    <link rel="stylesheet" href="./css/main.css" />
</head>

<body>

    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>

    <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-analytics.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-firestore.js"></script>
    <div class="checkoutContainer">
        <div class="checkout__header">
            <div class="checkout__header-heading">
                <h1>Purpose Driven Planner</h1>
                <p>
                    A High-Level Course For Those People Looking To Amplify Their Performance In Any Aspect Of Life
                    While Tearing Down The Barriers That Are Constantly Holding Them Back.
                </p>
            </div>
            <div class="checkout__header-logo">
                <img src="./img/pdp-logo.svg" alt="">
            </div>
        </div>
        <div class="checkout__content">
            <form action="" class="checkoutForm">
                <h2 class="checkoutForm__heading">Checkout Form</h2>
                <p class="checkoutError hidden">Please fill out all of the fields</p>
                <div class="checkoutForm__group mb-3">
                    <label for="">Email:</label>
                    <input type="email" name="" placeholder="Enter your email here" required id="email">
                </div>
                <div class="checkoutForm__group mb-3">
                    <label for="">Password:</label>
                    <input type="password" name="" placeholder="Enter your password here" required id="password">
                </div>
                <div class="checkoutForm__group mb-3">
                    <label for="">Confirm Your Password:</label>
                    <input type="password" name="" placeholder="Confirm your password here" required
                        id="passwordConfirm">
                </div>
                <div id="smart-button-container">
                    <div style="text-align: center;">
                        <div id="paypal-button-container"></div>
                    </div>
                </div>
                <script src="https://www.paypal.com/sdk/js?client-id=AQLuogVEWzYxD2INeMiS2sgzH8yebEYOKUygKv8K2lJOYseo_M0Ch70ojObZP8rTtek9nufNAcktk4PN&currency=USD"
                    data-sdk-integration-source="button-factory"></script>
                <script>
                    function initPayPalButton() {
                        const firebaseApp = firebase.initializeApp({
                            apiKey: 'AIzaSyCUgUFUERm9rrm47vmBc-V95lgxBUHZ0sM',
                            authDomain: 'pdplanner-a30ab.firebaseapp.com',
                            databaseURL: 'https://pdplanner-a30ab.firebaseio.com/',
                            projectId: 'pdplanner-a30ab',
                            storageBucket: 'pdplanner-a30ab.appspot.com',
                            messagingSenderId: '738390097709',
                            appId: '1:738390097709:web:0d28ce750c3f940277dda4',
                            measurementId: 'G-XXKW1DJ1PZ'
                        })
                        paypal.Buttons({
                            style: {
                                shape: 'pill',
                                color: 'white',
                                layout: 'vertical',
                                label: 'paypal',
                            },

                            onInit: function (data, actions) {
                                // Disable the buttons
                                let valid1 = false;
                                let valid2 = false;
                                let valid3 = false;
                                actions.disable();
                                document.querySelector('#email').addEventListener('input', (e) => {
                                    if (/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.target.value)) {
                                        valid2 = true;
                                    } else {
                                        valid2 = false;
                                    }
                                    if (valid1 && valid2 && valid3) {
                                        document.querySelector('.checkoutError').classList.add('hidden');
                                        actions.enable();
                                    } else {
                                        document.querySelector('.checkoutError').classList.remove('hidden');
                                        actions.disable();
                                    }
                                });
                                document.querySelector('#password').addEventListener('input', (e) => {
                                    if (e.target.value.length > 6) {
                                        valid1 = true;
                                    } else {
                                        valid1 = false;
                                    }
                                    if (e.target.value === document.querySelector('#passwordConfirm').value) {
                                        valid3 = true;
                                    } else {
                                        valid3 = false;
                                    }
                                    if (valid1 && valid2 && valid3) {
                                        document.querySelector('.checkoutError').classList.add('hidden');
                                        actions.enable();
                                    } else {
                                        document.querySelector('.checkoutError').classList.remove('hidden');
                                        actions.disable();
                                    }
                                });
                                document.querySelector('#passwordConfirm').addEventListener('input', (e) => {
                                    if (e.target.value === document.querySelector('#password').value) {
                                        valid3 = true;
                                    } else {
                                        valid3 = false;
                                    }
                                    if (valid1 && valid2 && valid3) {
                                        document.querySelector('.checkoutError').classList.add('hidden');
                                        actions.enable();
                                    } else {
                                        document.querySelector('.checkoutError').classList.remove('hidden');
                                        actions.disable();
                                    }
                                });
                            },

                            createOrder: function (data, actions) {
                                return actions.order.create({
                                    purchase_units: [{ "description": "Purpose Driven Planner Web Application with Video Course.", "amount": { "currency_code": "USD", "value": 47 } }]
                                });
                            },

                            onApprove: function (data, actions) {
                                return actions.order.capture().then(function (details) {
                                    firebase.auth().createUserWithEmailAndPassword(document.querySelector('#email').value, document.querySelector('#passwordConfirm').value)
                                        .then((user) => {
                                            const mailEl = document.querySelector('#email')

                                            const message = {
                                                to: mailEl.value,
                                                subject: 'Thank You For Your Purchase',
                                                text: `
Dear purpose driven student,
Welcome to the Purpose Driven Planner customer community. We’re honored that you’ve chosen to work with us.

It’s our utmost priority to ensure you have an excellent experience with our product and team from day one. 
You’ve purchased the full Purpose Driven Planner course, here is the login form:

thepurposedrivenplanner.com

We wish you great success from implementing the planner in your life and hope we see more of you in the future.
Visit our website and start planning today: thepurposedrivenplanner.com 
Here’s just a reminder of all the benefits Purpose Driven Planner provides you with:
    • Better time management
    • Sense of wholeness
    • Increased energy levels
    • Mindset shifts
    • Years of time saved

Feel free to write us an e-mail and we’ll make sure we respond with a personalized comeback within the next 24 hours.

Best regards,
PDP team`
                                            }
                                            fetch('https://pdpapp.com/', {
                                                method: 'POST',
                                                headers: {
                                                    'Accept': 'application/json',
                                                    'Content-Type': 'application/json'
                                                },
                                                body: JSON.stringify(message)
                                            }).catch(_ => {
                                                alert("Error happened you will not recieve confirmation mail, but you still can access app with your credentials, please contact support: purposedrivenplanner@gmail.com")
                                            }).finally(_ => {
                                                window.location = '/landing/thankyou.html';
                                            })

                                        })
                                        .catch((error) => {
                                            alert('Please contact support, something went wrong. purposedrivenplanner@gmail.com');
                                        });
                                });
                            },

                            onError: function (err) {
                                alert('Please contact support, something went wrong. purposedrivenplanner@gmail.com');
                            }
                        }).render('#paypal-button-container');
                    }
                    initPayPalButton();
                </script>
            </form>
            <div class="checkout__content-benefits">
                <h2>Here’s Just A Fraction Of What You Get:</h2>
                <div class="checkout__benefit">
                    <img src="./img/tick.svg" alt="">
                    <p><span>Better time management:</span> Your day will last 240 hours in productivity time.</p>
                </div>
                <div class="checkout__benefit">
                    <img src="./img/tick.svg" alt="">
                    <p><span>Sense of wholeness: </span>Your family, friends and passions will not get left behind due
                        to lack of your organizational skills.</p>
                </div>
                <div class="checkout__benefit">
                    <img src="./img/tick.svg" alt="">
                    <p><span>Increased energy levels: </span>So high on you won’t be able to sleep at night, coming from
                        a deep sense of purpose.</p>
                </div>
                <div class="checkout__benefit">
                    <img src="./img/tick.svg" alt="">
                    <p><span>Mindset shifts: </span>You will think like a top productive CEO in combination with the
                        person who’s fulfillment level doesn’t drop below level 10.</p>
                </div>
                <div class="checkout__benefit">
                    <img src="./img/tick.svg" alt="">
                    <p><span>Years of time saved: </span>Over 30 of the most efficient self-development, practical
                        psychology books, seminars and more than 7 years of trial and error packed into 2 hours of video
                        material where every second counts.</p>
                </div>
                <div class="checkout__benefit">
                    <img src="./img/tick.svg" alt="">
                    <p><span>More than 2 hours of video material: </span>I will guide you through the planner, teach you
                        how to use it and share with you my knowledge.</p>
                </div>
                <div class="checkout__benefit">
                    <img src="./img/tick.svg" alt="">
                    <p><span>Fast and interactive web application </span>for planning which will replace your pen and
                        paper.</p>
                </div>
                <div class="checkout__benefit">
                    <img src="./img/tick.svg" alt="">
                    <p><span>Lifetime access: </span>Your journey doesn't end after four weeks, you can visit the
                        planner, re-watch the videos and implement the planning methods for as long as you like.</p>
                </div>
            </div>
        </div>
        <footer class="checkout__footer">
            <p>“A vision without a task is but a dream, a task without a vision is drudgery, a vision and a task are the
                hope of the World.” From a church in Sussex, England, ca. 1730.</p>
        </footer>
    </div>

</body>

</html>